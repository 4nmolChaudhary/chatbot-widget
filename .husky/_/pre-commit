#!/bin/bash
#!/bin/sh
set -e

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

printf "${YELLOW}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${NC}\n"
printf "${YELLOW}â”‚    Running checksâ€¦ Please wait     â”‚${NC}\n"
printf "${YELLOW}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${NC}\n"

if ! npm run typecheck; then
  echo ""
  printf "${RED}â–ˆâ–€â–€ â–ˆ â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–€ â–ˆ â–ˆ â–ˆâ–€â–€   â–ˆâ–€â–€ â–ˆâ–€â–ˆ â–€â–ˆâ–€ â–ˆ   â–ˆâ–€â–€ â–ˆâ–€â–„ ${NC}\n"
  printf "${RED}â–ˆ   â–ˆâ–€â–ˆ â–ˆâ–€â–€ â–ˆ   â–ˆâ–€â–„ â–€â–€â–ˆ   â–ˆâ–€â–€ â–ˆâ–€â–ˆ  â–ˆ  â–ˆ   â–ˆâ–€â–€ â–ˆ â–ˆ ${NC}\n"
  printf "${RED}â–€â–€â–€ â–€ â–€ â–€â–€â–€ â–€â–€â–€ â–€ â–€ â–€â–€â–€   â–€   â–€ â–€ â–€â–€â–€ â–€â–€â–€ â–€â–€â–€ â–€â–€${NC}"
  echo ""
  printf "${RED}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${NC}\n"
  printf "${RED}â”‚    Pre-commit checks failed. Please fix the errors above and try again     â”‚${NC}\n"
  printf "${RED}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${NC}\n"
  exit 1
fi

printf "${YELLOW}ğŸ¨ Formatting staged files...${NC}\n\n"

if ! npx lint-staged; then
  printf "${RED}âŒ Formatting failed. Please fix Prettier errors.${NC}"
  exit 1
fi

echo ""
printf "${GREEN}â–ˆâ–€â–ˆ â–ˆ   â–ˆ     â–ˆâ–€â–€ â–ˆ â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–€ â–ˆ â–ˆ â–ˆâ–€â–€   â–ˆâ–€â–ˆ â–ˆâ–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–€ â–ˆâ–€â–€ â–ˆâ–€â–„${NC}\n"
printf "${GREEN}â–ˆâ–€â–ˆ â–ˆ   â–ˆ     â–ˆ   â–ˆâ–€â–ˆ â–ˆâ–€â–€ â–ˆ   â–ˆâ–€â–„ â–€â–€â–ˆ   â–ˆâ–€â–€ â–ˆâ–€â–ˆ â–€â–€â–ˆ â–€â–€â–ˆ â–ˆâ–€â–€ â–ˆ â–ˆ${NC}\n"
printf "${GREEN}â–€ â–€ â–€â–€â–€ â–€â–€â–€   â–€â–€â–€ â–€ â–€ â–€â–€â–€ â–€â–€â–€ â–€ â–€ â–€â–€â–€   â–€   â–€ â–€ â–€â–€â–€ â–€â–€â–€ â–€â–€â–€ â–€â–€ ${NC}\n"
echo ""
